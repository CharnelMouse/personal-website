---
title: "Codex model"
output:
  html_document:
    number_sections: false
    self_contained: yes
    code_folding: none
    df_print: paged
author: "Mark Webster"
date: 'Last modified: 30 Dec 2019'
---

<script src="/rmarkdown-libs/htmlwidgets/htmlwidgets.js"></script>
<script src="/rmarkdown-libs/pymjs/pym.v1.js"></script>
<script src="/rmarkdown-libs/widgetframe-binding/widgetframe.js"></script>


<div id="simulation-configuration" class="section level1">
<h1>Simulation configuration</h1>
<p>Current model sample size is 4000. However, since we use a Markov Chain sampler, the samples are correlated: the effective sample size varies between different parameters, within the range (1036, 8652).</p>
</div>
<div id="posterior-model-performance" class="section level1">
<h1>Posterior model performance</h1>
<div id="htmlwidget-1" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-1">{"x":{"url":"/model_files/figure-html//widgets/widget_Matchup predictions for mean performance models.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
<p><img src="/model_files/figure-html/Density%20plots%20for%20predictions%20for%20matches%20with%20simple%20decks-1.png" width="672" /><img src="/model_files/figure-html/Density%20plots%20for%20predictions%20for%20matches%20with%20simple%20decks-2.png" width="672" /><img src="/model_files/figure-html/Density%20plots%20for%20predictions%20for%20matches%20with%20simple%20decks-3.png" width="672" /></p>
<p>If the model predicted matches by saying the most likely winner would win, its performance on the above matches, which were used to fit it, would be 345 out of 403 (85.6%). Since it gives a probability of each player winning, we can use proper scoring rules instead (the closer to zero, the better):</p>
<div id="htmlwidget-2" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-2">{"x":{"url":"/model_files/figure-html//widgets/widget_model scores.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="player-skill" class="section level1">
<h1>Player skill</h1>
<p>Player skills are given as their (additive) effect on their log-odds of winning a match. Skill is currently assumed to not change over time, so given skill levels for long-absent players are narrowly-distributed compared to how certain we’d really be about their current skill level. It’ll also favour players who were veterans before the earliest recorded match, because the period where they learned the ropes is not included in their match records.</p>
<p><img src="/model_files/figure-html/plot%20vs%20models%20player%20skills-1.png" width="672" /></p>
<p><img src="/model_files/figure-html/plot%20probability%20player%20is%20best-1.png" width="672" /></p>
<div id="htmlwidget-3" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-3">{"x":{"url":"/model_files/figure-html//widgets/widget_player skill table.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="opposed-component-effects" class="section level1">
<h1>Opposed component effects</h1>
<p>Decks are treated in opposing pairs: P1 starter versus P2 starter, P1 starter versus each P2 spec, and so on. Each match has 16 such pairs. Each pair’s effect is given as its additive effect on the log-odds of a player 1 victory. The component’s effects are added to given overall matchup between the decks, before accounting for player skill levels.</p>
<p>Note that these pair effects are <em>not</em> direct appraisals of how the components fare against each other. For each, the Green vs. Black effect doesn’t assess how those two decks decks match up against each other, it assesses how decks using those starter decks <em>tend</em> to match up against each other. Similarly, Blood vs. Future doesn’t, directly assess how those two specs compete at, say, Tech II, because I don’t record tech building choices. Instead, it shows how P1 decks including Blood tend to fare against P2 decks including Future. Note that this also ignores interactions between different pairs completely.</p>
<p>To examine the matchup between two particular decks, add their components in the relevant Deck components column. The overall matchup is then given below the table, as both the log-odds and the probability of a player 1 victory. Individual pair effects are given in the displayed table rows.</p>
<p>Currently I’ve not added the players in the same table to account for skill effects. In the meantime, since player skill tends to have a larger effect than the deck matchup, don’t compare the deck matchups to your own match outcomes too strictly, unless you can manually add the effects from the player table (remember to subtract the P2 effect, not add it).</p>
<div id="htmlwidget-4" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-4">{"x":{"url":"/model_files/figure-html//widgets/widget_simple versus table.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="monocolour-matchups" class="section level1">
<h1>Monocolour matchups</h1>
<p>Since we’re most interested in whether monocolour decks are reasonably balanced, here are matchup results for the monocolour decks. The three black vertical lines in each plot facet show the matchup quartiles.</p>
<p><img src="/model_files/figure-html/make%20vs%20model%20monocolour%20matchup%20plots-1.png" width="672" /></p>
<div id="htmlwidget-5" style="width:100%;height:100%;" class="widgetframe html-widget"></div>
<script type="application/json" data-for="htmlwidget-5">{"x":{"url":"/model_files/figure-html//widgets/widget_print vs model monocolour matchups in order.html","options":{"xdomain":"*","allowfullscreen":false,"lazyload":false}},"evals":[],"jsHooks":[]}</script>
</div>
<div id="model-variances" class="section level1">
<h1>Model variances</h1>
<p>Each type of component in the model has a different variance in the effect; inference for the variances is also done in the model simulation. The below plot shows the variances for each component type, scaled by how many such components go into a matchup, i.e. two player skill components, one starter vs. starter component, six starter vs. spec / spec vs. starter components, and nine spec vs. spec components.</p>
<p><img src="/model_files/figure-html/plot%20versus%20model%20variances-1.png" width="672" /></p>
<p>Total player skill effects on match outcome vary about twice as much as total deck effects, on average. Informally, this means the players are about twice as important as the decks.</p>
</div>
